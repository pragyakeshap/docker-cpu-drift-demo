
FROM eclipse-temurin:17-jre
WORKDIR /app
COPY target/cpu-drift-demo-1.0.0.jar /app/app.jar

# Baseline version - conservative settings for broad compatibility
# Disable advanced vector instructions to simulate older CPU
CMD ["java", \
     "--add-modules", "jdk.incubator.vector", \
     "-XX:+UnlockDiagnosticVMOptions", \
     "-XX:-UseSuperWord", \
     "-XX:MaxVectorSize=16", \
     "-Xms256m", "-Xmx512m", \
     "-jar", "/app/app.jar"]
